<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="Author" content="Lee">
    <meta name="Keywords" content="后台模板">
    <title></title>
    <link rel="stylesheet" href="./css/layui.css">
    <link rel="stylesheet" href="./css/public.css" />
    <script src="./layui.js"></script>
</head>
<style>

</style>

<body>
    <div class="layui-layout layui-layout-admin">
        <div class="layui-header">
            <div class="layui-logo">后台模板</div>

            <ul class="layui-nav layui-layout-right">

                <li class="layui-nav-item"><a href="">退出</a></li>
            </ul>
        </div>

        <!-- 侧边栏 -->
        <div class="layui-side layui-bg-black">
            <div class="layui-side-scroll">
                <img src="./images/avator.png" class="user_img" />
                <h1 class="user_name">你好！Lee,欢迎登陆</h1>
                <ul class="layui-nav layui-nav-tree" lay-filter="left-nav">
                    <li class="layui-nav-item">
                        <!-- layui-nav-itemed-->
                        <a href="javascript:;"><i class="layui-icon">&#xe63c;</i>博客</a>
                        <dl class="layui-nav-child">
                            <dd><a href="javascript:;" data-id="0" data-url="./blog.html" class="left_nav">全部博客</a></dd>
                            <dd><a href="javascript:;" data-id="1" data-url="./blog_editor.html" class="left_nav">新建博客</a></dd>
                            <dd><a href="javascript:;" data-id="2" data-url="./person_blog_draft.html" class="left_nav">草稿箱</a></dd>
                            <dd><a href="javascript:;" data-id="3" data-url="./person_blog_history.html" class="left_nav">博客管理</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;"><i class="layui-icon">&#xe698;</i>新闻管理</a>
                        <dl class="layui-nav-child">

                            <dd><a href="javascript:;" data-id="4" data-url="./editor.html" class="left_nav">新建博客</a></dd>
                            <dd><a href="javascript:;" data-id="5" data-url="./message.html" class="left_nav">草稿箱</a></dd>
                            <dd><a href="javascript:;" data-id="6" data-url="./message_history.html" class="left_nav">博客管理</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;"><i class="layui-icon">&#xe62e;</i>项目管理</a>
                        <dl class="layui-nav-child">
                            <dd><a href="javascript:;" data-id="7" data-url="./project_editor.html" class="left_nav">新建项目</a></dd>
                            <dd><a href="javascript:;" data-id="8" data-url="./project_message.html" class="left_nav">草稿箱</a></dd>
                            <dd><a href="javascript:;" data-id="9" data-url="./project_message_history.html" class="left_nav">项目管理</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;"><i class="layui-icon">&#xe629;</i>成员管理</a>
                        <dl class="layui-nav-child">
                            <dd><a href="javascript:;" data-url="./graduate.html" data-id="10" class="left_nav"><i class="layui-icon">&#xe62c;</i>成员管理</a></dd>

                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;"><i class="layui-icon">&#xe612;</i>组别管理</a>
                        <dl class="layui-nav-child">
                            <dd><a href="javascript:;" data-url="./group.html" data-id="11" class="left_nav"><i class="layui-icon">&#xe6b2;</i>组别管理</a></dd>

                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;"><i class="layui-icon">&#xe60a;</i>标签管理</a>
                        <dl class="layui-nav-child">
                            <dd><a href="javascript:;" data-url="./classify.html" data-id="12" class="left_nav"><i class="layui-icon">&#xe6b2;</i>标签管理</a></dd>

                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;"><i class="layui-icon">&#xe61c;</i>404</a>
                        <dl class="layui-nav-child">
                            <dd><a href="javascript:;" data-url="404.html" data-id="13" class="left_nav"><i class="layui-icon">&#xe61c;</i>404</a></dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>
        <!-- 主体 -->
        <div class="layui-body">
            <!-- 顶部切换卡 -->
            <div class="layui-tab layui-tab-brief" lay-filter="top-tab" lay-allowClose="true" style="margin: 0;">
                <ul class="layui-tab-title"></ul>
                <div class="layui-tab-content" style="padding: 0;">
                    <div class="layui-progress" lay-filter="progress">
                        <div class="layui-progress-bar" lay-percent="0%"></div>
                    </div>
                </div>
            </div>
            <h1 class="admin_title">后台模板</h1>
        </div>
        <!-- 底部 -->
        <!--        <div class="layui-footer" style="text-align: center; line-height: 44px;">
           	asdasd
        </div>-->
    </div>


    <script type="text/javascript">
        layui.use(['layer', 'element'], function() {

            var element = layui.element;
            var layer = layui.layer;
            var $ = layui.jquery;

            // var navfilter = 'left-nav';
            // var nav = $('.layui-nav[lay-filter=' + navfilter + ']').eq(0);
            // var tabfilter = 'top-tab';
            // var tab = $('.layui-tab[lay-filter=' + tabfilter + ']').eq(0);
            // var tabcontent = tab.children('.layui-tab-content').eq(0);
            // var tabtitle = tab.children('.layui-tab-title').eq(0);
            /**
             * 监听侧边栏导航点击事件
             */
            var active = {
                tabAdd: function(url, id, text) {
                    //新增一个Tab项
                    element.tabAdd('top-tab', {
                        title: text //用于演示
                            ,
                        content: '<iframe data-frameid="' + id + '" frameborder="0" name="content" scrolling="yes" width="100%" src="' + url + '"></iframe>',
                        id: id //实际使用一般是规定好的id，这里以时间戳模拟下
                    });
                    FrameWH()
                },
                tabChange: function(id) {
                    element.tabChange('top-tab', id); //切换到：用户管理
                    $("iframe[data-frameid='" + id + "']").attr("src", $("iframe[data-frameid='" + id + "']").attr("src")) //切换后刷新框架
                },
                tabDelete: function(id) {
                    element.tabDelete("top-tab", id); //删除
                },
                tabDeleteAll: function(ids) { //删除所有
                    $.each(ids, function(i, item) {
                        element.tabDelete("top-tab", item);
                    })
                }
            };

            function FrameWH() {
                var h = $(window).height();
                // h = h + 200;
                $("iframe").css("height", h + "px");
            }
            element.on('tab(top-tab)', function(data) {
                $('.layui-tab').show();
                $('.admin_title').hide();
                $('.layui-progress-bar').fadeOut();
                element.progress('progress', '0%');
                var _index = data.index;
                $('iframe').stop().animate({
                    opacity: 0,
                    top: '30px'
                }, 300);
                $('iframe').eq(_index).animate({
                    opacity: 1,
                    top: 0
                }, 300);
                $('iframe').eq(_index).load(function() {
                    $('.layui-progress-bar').fadeIn();
                    element.progress('progress', '100%');
                    $('.layui-progress-bar').fadeOut(20);
                })
            });
            element.on('tabDelete(top-tab)', function(data) {
                if (tabtitle.find('li').length < 1) {
                    $('.layui-tab').hide();
                    $('.admin_title').show();
                }
            });
            $(".left_nav").click(function() {
                var dataid = $(this);
                if ($(".layui-tab-title li[lay-id]").length <= 0) {
                    active.tabAdd(dataid.attr("data-url"), dataid.attr("data-id"), dataid.html());

                } else {
                    var isData = false;
                    $.each($(".layui-tab-title li[lay-id]"), function() {
                        if ($(this).attr("lay-id") == dataid.attr("data-id")) {
                            isData = true;
                        }
                    })
                    if (isData == false) {
                        active.tabAdd(dataid.attr("data-url"), dataid.attr("data-id"), dataid.html());
                    }
                }
                active.tabChange(dataid.attr("data-id"));
            })

            document.addEventListener('keydown', function(e) { //锁屏监听alt+l
                if (e.keyCode == 76 && 18) {
                    $('.logo_shard').fadeIn();
                }
            })
            $('.user_img').click(function() {
                layer.open({
                    anim: 5,
                    title: "更换头像",
                    area: ['500px', '500px'],
                    type: 2,
                    content: 'drawImg.html' //这里content是一个URL，如果你不想让iframe出现滚动条，你还可以content: ['http://sentsin.com', 'no']
                });

            })

        });

        function imgAttr(url) {
            document.getElementsByClassName('user_img')[0].setAttribute('src', url);
            layui.use('layer', function() {
                var layer = layui.layer;
                layer.msg('更换成功');
            })
        }
    </script>
</body>

</html>